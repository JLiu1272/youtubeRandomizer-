<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="meat.js"></script>
<script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.0/moment.min.js"></script>

</head>
<body>

<script>
/*Splits the textbox input into individual links and append
  input onto a new array
  Return: An array filled with video links*/
function appendLinksToArray(){
	var links = Array();
	var str = document.getElementById("textarea_id").value;
	var res = str.split("\n");
	for(var i = 0; i < res.length; i++){
		if()
		links.push(res[i]);
	}
	return links;
}

/*
  Gets video ID and returns video ID
*/
function getVid_ID(singleLink){
	var video_id = singleLink.split('v=')[1];
	var ampersandPosition = video_id.indexOf('&');
	if(ampersandPosition != -1) {
  		video_id = video_id.substring(0, ampersandPosition);
	}
	return video_id
}

/* Opens a random video at a random time given 
   its duration from the selection given 
*/
function opensRandomVideo(){
	var links = appendLinksToArray();
	var singleLink = getRandomLink(links);
	var video_id = getVid_ID(singleLink);

    getDuration(video_id,
		function(duration){
			var randomLinkCreated = appendTimeToURL(singleLink,duration);
			var randomLinkID = getVid_ID(randomLinkCreated);

			document.getElementById("iframe_id").src = "https://www.youtube.com/embed/" + randomLinkID + "?autoplay=1";
			var iframesrc = document.getElementById("iframe_id").src;
			document.getElementById("demo").innerHTML = iframesrc;
		}
	 );
}
</script>

<textarea id="textarea_id" rows="4" cols="50">Input Youtube Link</textarea>
<button onclick="opensRandomVideo()">Submit Link</button>
<p id="demo"></p>
<iframe id="iframe_id" src="https://www.youtube.com/embed/GRonxog5mbw?autoplay=1">
  <p>Your browser does not support iframes.</p>
</iframe>


</body>
</html>
